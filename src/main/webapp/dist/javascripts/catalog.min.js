/*! catalog 13-08-2014 */
function populateTable(){var a="";$.getJSON("/catalog/cataloglist",function(b){catalogListData=b,$.each(b,function(){a+="<tr>",a+='<td><a href="#" class="linkproduct" rel="'+this.ProductId+'" title="Show Details">'+this.ProductId+"</a></td>",a+="<td>"+this.Category+"</td>",a+="<td>"+this.Brand+"</td>",a+="</tr>"}),$("#CatalogList table tbody").html(a)})}function showCatalogInfo(a){a.preventDefault();var b=$(this).attr("rel"),c=catalogListData.map(function(a){return a.ProductId}).indexOf(b),d=catalogListData[c];$("#CatalogInfoProduct").text(d.ProductId),$("#CatalogInfoCategory").text(d.Category),$("#CatalogInfoBrand").text(d.Brand),$("#CatalogInfoModel").text(d.Model),$("#CatalogInfoColor").text(d.Color),$("#CatalogInfoPrice").text(d.Price)}function addnewCatalog(a){a.preventDefault();var b=0;if($("#addCatalog input").each(function(){""===$(this).val()&&b++}),0!==b)return alert("Please fill in all fields"),!1;var c={ProductId:$("#addCatalog fieldset input#inputProductId").val(),Category:$("#addCatalog fieldset input#inputCategory").val(),Brand:$("#addCatalog fieldset input#inputBrand").val(),Model:$("#addCatalog fieldset input#inputModel").val(),Color:$("#addCatalog fieldset input#inputColor").val(),Price:$("#addCatalog fieldset input#inputPrice").val()};$.ajax({type:"POST",data:c,url:"/catalog/addcatalog",dataType:"JSON"}).done(function(a){""===a.msg?($("#addCatalog fieldset input").val(""),populateTable()):alert("Error: "+a.msg)})}var catalogListData=[];$(document).ready(function(){populateTable(),$("#CatalogList table tbody").on("click","td a.linkproduct",showCatalogInfo),$("#btnAddCatalog").on("click",addnewCatalog)});